<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Da Rocco AR</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont;
background:url('images/sfondo.jpg') center center no-repeat;
background-size:cover;
color:white;
}

.overlay{
position:fixed;
width:100%;
height:100%;
background:rgba(0,0,0,0.75);
z-index:-1;
}

.screen{
height:100vh;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
}

#logo{
width:180px;
margin-bottom:40px;
}

.button{
padding:15px 40px;
background:#c62828;
border-radius:12px;
font-size:20px;
}

.menu{
display:none;
flex-direction:column;
align-items:center;
height:100vh;
padding-top:60px;
}

.wheel{
margin-top:40px;
height:260px;
overflow-y:scroll;
scroll-snap-type:y mandatory;
width:100%;
text-align:center;
}

.item{
height:80px;
display:flex;
align-items:center;
justify-content:center;
font-size:26px;
scroll-snap-align:center;
}

.item.active{
font-size:30px;
color:#ff5252;
}

.closeAR{
position:absolute;
top:40px;
left:20px;
background:#000;
padding:10px 20px;
border-radius:10px;
color:white;
z-index:5;
}

#arContainer{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:black;
}
</style>
</head>

<body>

<div class="overlay"></div>

<audio id="din" src="sounds/din.mp3"></audio>
<audio id="piatti" src="sounds/piatti.mp3"></audio>

<!-- HOME -->
<div class="screen" id="home">
<img src="images/logo.png" id="logo">
<div class="button" onclick="enter()">ENTRA</div>
</div>

<!-- MENU -->
<div class="menu" id="menu">
<img src="images/logo.png" id="logo">
<div class="wheel" id="wheel">
<div class="item">Margherita</div>
<div class="item">Diavola</div>
<div class="item">Capricciosa</div>
<div class="item">Tartufo</div>
<div class="item">Classic Burger</div>
<div class="item">Cheese Burger</div>
</div>
</div>

<!-- AR -->
<div id="arContainer">
<div class="closeAR" onclick="closeAR()">Chiudi</div>

<a-scene embedded webxr="requiredFeatures: hit-test; optionalFeatures: local-floor">
<a-entity
gltf-model="models/pizza.glb"
scale="0.5 0.5 0.5"
position="0 0 -2">
</a-entity>
<a-camera position="0 1.6 0"></a-camera>
</a-scene>

</div>

<script>

let lastIndex = -1;
const wheel = document.getElementById('wheel');
const items = document.querySelectorAll('.item');
const din = document.getElementById('din');
const piatti = document.getElementById('piatti');

function enter(){
document.getElementById('home').style.display='none';
document.getElementById('menu').style.display='flex';
}

wheel.addEventListener('scroll', ()=>{
let index = Math.round(wheel.scrollTop / 80);

if(index !== lastIndex && items[index]){
items.forEach(i=>i.classList.remove('active'));
items[index].classList.add('active');
din.currentTime = 0;
din.play();
lastIndex = index;
}
});

items.forEach(item=>{
item.addEventListener('click', ()=>{
piatti.currentTime=0;
piatti.play();
document.getElementById('menu').style.display='none';
document.getElementById('arContainer').style.display='block';
});
});

function closeAR(){
piatti.currentTime=0;
piatti.play();
document.getElementById('arContainer').style.display='none';
document.getElementById('menu').style.display='flex';
}

</script>

</body>
</html>
